[gd_scene load_steps=7 format=3 uid="uid://busogtbhjs2b8"]

[ext_resource type="Texture2D" uid="uid://fsor74keuwd5" path="res://door.png" id="1_uftyp"]

[sub_resource type="GDScript" id="GDScript_ufypy"]
script/source = "extends Node

@onready var light = $PointLight2D2

func _ready() -> void:
	if light:
		print(\"Light found!\")
		setup_light()
	else:
		print(\"ERROR: PointLight2D2 not found!\")

func setup_light():
	light.color = Color(0.2, 0.5, 1.0)  # Bright blue
	light.energy = 2.0
	light.enabled = true
	
	var img = Image.new()
	img.create(64, 64, false, Image.FORMAT_RGBA8)
	var center = Vector2(32, 32)
	var radius = 32
	
	for x in range(64):
		for y in range(64):
			var dist = center.distance_to(Vector2(x, y))
			if dist < radius:
				var alpha = 1.0 - (dist / radius)
				img.set_pixel(x, y, Color(1, 1, 1, alpha))
	
	var tex = ImageTexture.create_from_image(img)
	light.texture = tex
	light.texture_scale = 4.0

func _process(delta: float) -> void:
	if light:
		var time = Time.get_ticks_msec() / 100.0  # Faster pulsing (smaller number = faster)
		light.energy = 0.5 + 3.5 * abs(sin(time))  # Pulse between 0.5 and 4.0 brightness
"

[sub_resource type="Animation" id="Animation_6j87o"]
resource_name = "new_animation"
loop_mode = 1

[sub_resource type="AnimationLibrary" id="AnimationLibrary_yxgrc"]
_data = {
"new_animation": SubResource("Animation_6j87o")
}

[sub_resource type="Gradient" id="Gradient_oavwo"]
colors = PackedColorArray(1, 0.6, 0.2, 1, 1, 0.6, 0.2, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_dl6wk"]
gradient = SubResource("Gradient_oavwo")
width = 300
height = 300
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.9, 0.1)

[node name="Node" type="Node"]
script = SubResource("GDScript_ufypy")

[node name="Timer" type="Timer" parent="."]

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_yxgrc")
}

[node name="Door" type="Sprite2D" parent="."]
position = Vector2(1002, -1507)
scale = Vector2(0.40124, 0.401332)
texture = ExtResource("1_uftyp")

[node name="PointLight2D2" type="PointLight2D" parent="."]
position = Vector2(0, -2)
color = Color(1, 0.6, 0.2, 1)
energy = 1.2
shadow_enabled = true
shadow_filter = 1
shadow_filter_smooth = 1.0
texture = SubResource("GradientTexture2D_dl6wk")
